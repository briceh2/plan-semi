<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plan Semi â€” 10 mai 2026 (4 sÃ©ances)</title>
  <style>
    :root { --pad: 14px; }
    body {
      margin: 0; font-family: -apple-system, system-ui, Segoe UI, Roboto, Arial, sans-serif;
      background: #f6f7f8; color: #111;
    }
    header {
      position: sticky; top: 0; z-index: 10;
      background: white; border-bottom: 1px solid #e5e7eb;
      padding: 12px var(--pad);
    }
    h1 { font-size: 16px; margin: 0 0 6px 0; }
    .sub { font-size: 12px; color: #444; line-height: 1.35; }
    .wrap { padding: var(--pad); max-width: 980px; margin: 0 auto; }
    .card {
      background: white; border: 1px solid #e5e7eb; border-radius: 12px;
      padding: 12px; margin: 10px 0; box-shadow: 0 1px 0 rgba(0,0,0,.03);
    }
    .row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }
    .pill {
      display: inline-block; font-size: 12px; padding: 4px 8px; border-radius: 999px;
      background: #eef2ff; color: #1f2a77;
    }
    .phase { background: #ecfeff; color: #155e75; }
    .warn { background: #fff7ed; color: #9a3412; }
    .ok { background: #ecfdf5; color: #065f46; }
    details summary {
      cursor: pointer; font-weight: 700; font-size: 14px; list-style: none;
      display: flex; align-items: center; justify-content: space-between; gap: 10px;
    }
    details summary::-webkit-details-marker { display: none; }
    .meta { font-size: 12px; color: #444; margin-top: 6px; line-height: 1.35; }
    .session {
      border-top: 1px dashed #e5e7eb; padding-top: 10px; margin-top: 10px;
    }
    .s-title { font-weight: 700; margin: 0 0 6px 0; }
    label.cb { display: flex; align-items: center; gap: 10px; }
    input[type="checkbox"] { width: 22px; height: 22px; }
    textarea, input[type="number"] {
      width: 100%; border: 1px solid #d1d5db; border-radius: 10px; padding: 10px;
      font-size: 14px; box-sizing: border-box; background: #fff;
    }
    textarea { min-height: 64px; resize: vertical; }
    .grid3 { display: grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 720px) { .grid3 { grid-template-columns: 1fr 2fr 2fr; } }
    .btns { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
    button {
      border: 1px solid #d1d5db; background: #fff; border-radius: 10px;
      padding: 10px 12px; font-size: 14px;
    }
    button.primary { background: #111827; color: #fff; border-color: #111827; }

    /* Tabs */
    .tabs { display: flex; gap: 8px; margin-top: 10px; }
    .tab {
      flex: 1; text-align: center; padding: 10px 12px; border-radius: 12px;
      border: 1px solid #e5e7eb; background: #fff; font-weight: 700; font-size: 14px;
    }
    .tab.active { background: #111827; color: #fff; border-color: #111827; }
    .hidden { display:none; }

    /* Stats */
    .barwrap { display: grid; gap: 8px; margin-top: 10px; }
    .barrow { display: grid; grid-template-columns: 54px 1fr 46px; gap: 10px; align-items: center; }
    .bar {
      height: 10px; border-radius: 999px; background: #e5e7eb; overflow: hidden;
    }
    .bar > span { display:block; height: 100%; width: 0%; background: #111827; }
    .muted { color:#555; font-size:12px; }
    .kpi { font-size: 12px; color: #111; margin-top: 8px; line-height: 1.35; }
    .kpi strong { font-size: 13px; }
    .two { display:grid; grid-template-columns: 1fr; gap: 10px; }
    @media (min-width: 720px){ .two { grid-template-columns: 1fr 1fr; } }
    .list { margin: 8px 0 0; padding-left: 18px; }
  </style>
</head>
<body>
<header>
  <h1>Plan Semi â€” Course dimanche 10 mai 2026</h1>
  <div class="sub">
    DÃ©but : <b>lundi 2 fÃ©vrier 2026</b> â€¢ Jours : <b>Mar / Jeu / Sam / Dim</b><br>
    Objectif : <b>1h45 (5â€™00/km)</b> â€¢ Bonus : <b>1h43â€“1h44</b>
  </div>

  <div class="tabs">
    <button class="tab active" id="tabPlan">Plan</button>
    <button class="tab" id="tabStats">Stats</button>
    <button class="tab" id="tabNutri">Nutrition</button>
  </div>

  <div class="kpi" id="kpi"></div>
</header>

<div class="wrap">
  <div class="card">
    <div class="row" id="statusRow">
      <span class="pill">ğŸ’¾ Sauvegarde auto</span>
      <span class="pill phase">ğŸ›¡ï¸ Pas 2 sÃ©ances dures dâ€™affilÃ©e</span>
      <span class="pill" id="fatiguePill">â€”</span>
    </div>
  </div>

  <!-- PLAN -->
  <section id="planSection">
    <div id="weeks"></div>
  </section>

  <!-- STATS -->
  <section id="statsSection" class="hidden">
    <div class="card">
      <div class="row">
        <span class="pill" id="globalPill">â€”</span>
        <span class="pill" id="sleepPill">â€”</span>
        <span class="pill" id="painPill">â€”</span>
      </div>
      <div class="two">
        <div>
          <div class="s-title">Progression hebdomadaire</div>
          <div id="bars" class="barwrap"></div>
        </div>
        <div>
          <div class="s-title">Alerte fatigue</div>
          <ul class="list" id="fatigueList"></ul>
        </div>
      </div>
    </div>
  </section>

  <!-- NUTRITION -->
  <section id="nutriSection" class="hidden">
    <div class="card">
      <h3>ğŸ½ï¸ StratÃ©gie Nutrition & Hydratation</h3>

      <h4>Phase Base & Moteur (Semaines 1â€“5)</h4>
      <ul>
        <li>Objectif : construire les rÃ©serves et la rÃ©cupÃ©ration</li>
        <li>Glucides modÃ©rÃ©s, protÃ©ines quotidiennes (Å“ufs, poisson, yaourt, lÃ©gumineuses)</li>
        <li>Hydratation : urine claire, 1 verre dâ€™eau Ã  chaque repas</li>
      </ul>

      <h4>Phase SpÃ©cifique Semi (Semaines 6â€“12)</h4>
      <ul>
        <li>Tester le ravitaillement : <b>1 gel au km 9â€“11 + eau</b></li>
        <li>Augmenter glucides la veille des sorties longues</li>
        <li>Boisson Ã©nergÃ©tique aprÃ¨s sÃ©ances dures</li>
      </ul>

      <h4>Phase AffÃ»tage (Semaines 13â€“14)</h4>
      <ul>
        <li>RÃ©duire fibres & aliments lourds</li>
        <li>Augmenter glucides J-2 / J-1</li>
        <li>Pas dâ€™aliments nouveaux</li>
      </ul>

      <h4>ğŸ Semaine de course</h4>
      <ul>
        <li>Petit-dÃ©j J : pain blanc + miel + banane + eau</li>
        <li>En course : eau tous les 5 km</li>
        <li>Gel au km 9â€“11</li>
        <li>AprÃ¨s : eau + glucides + protÃ©ines dans lâ€™heure</li>
      </ul>
    </div>
  </section>
</div>

<script>
  const START = new Date("2026-02-02T00:00:00"); // Lundi 2 fÃ©vrier 2026
  const WEEKS = 14;

  function fmtDate(d){
    return d.toLocaleDateString("fr-FR", { day:"2-digit", month:"short", year:"numeric" });
  }
  function addDays(d, n){ const x = new Date(d); x.setDate(x.getDate()+n); return x; }

  function phaseForWeek(w){
    if (w <= 5) return "Base & Moteur";
    if (w <= 12) return "SpÃ©cifique Semi";
    return "AffÃ»tage";
  }

  function sessionsForWeek(w){
    if (w <= 5) {
      return {
        tue: "VMA : 2 Ã— (8 Ã— 30s rapide / 30s lent)",
        thu: "Tempo : 3 Ã— 8 min Ã  5â€™10â€“5â€™05/km",
        sat: "Endurance facile 45â€“60 min",
        sun: "Sortie longue 1h20â€“1h35"
      };
    } else if (w <= 12) {
      return {
        tue: "VMA : 10 Ã— 400 m",
        thu: "Allure semi : 2â€“3 Ã— 15 min Ã  5â€™00/km",
        sat: "Endurance facile 50â€“60 min",
        sun: "Sortie longue 1h30â€“1h45 (blocs allure semi)"
      };
    } else {
      return {
        tue: "6 Ã— 200 m rapide",
        thu: "2 Ã— 10 min allure semi",
        sat: "40 min trÃ¨s facile",
        sun: w === 14 ? "ğŸ SEMI-MARATHON â€” 21,1 km" : "45 min facile"
      };
    }
  }

  const KEY = "planSemiData_v3";
  const data = JSON.parse(localStorage.getItem(KEY) || '{"weeks":{}}');

  function ensureWeek(w){
    if (!data.weeks[w]) {
      data.weeks[w] = { done:{tue:false,thu:false,sat:false,sun:false}, sleep:"", feel:"", pain:"" };
    }
  }

  function render(){
    const weeksEl = document.getElementById("weeks");
    weeksEl.innerHTML = "";

    for (let w=1; w<=WEEKS; w++){
      ensureWeek(w);
      const start = addDays(START, (w-1)*7);
      const end = addDays(start, 6);
      const s = sessionsForWeek(w);

      const card = document.createElement("div");
      card.className = "card";

      const det = document.createElement("details");
      det.open = w <= 2;

      det.innerHTML = `
        <summary>
          <span>Semaine  â€”  â†’ </span>
          <span class="pill phase"></span>
        </summary>
        <div class="session"><b>Mardi</b> â€” </div>
        <div class="session"><b>Jeudi</b> â€” </div>
        <div class="session"><b>Samedi</b> â€” </div>
        <div class="session"><b>Dimanche</b> â€” </div>
      `;

      card.appendChild(det);
      weeksEl.appendChild(card);
    }
  }

  // Tabs
  function show(tab){
    ["planSection","statsSection","nutriSection"].forEach(id=>{
      document.getElementById(id).classList.add("hidden");
    });
    document.getElementById(tab+"Section").classList.remove("hidden");

    ["tabPlan","tabStats","tabNutri"].forEach(id=>{
      document.getElementById(id).classList.remove("active");
    });
    document.getElementById("tab"+tab.charAt(0).toUpperCase()+tab.slice(1)).classList.add("active");
  }

  document.getElementById("tabPlan").onclick = ()=>show("plan");
  document.getElementById("tabStats").onclick = ()=>show("stats");
  document.getElementById("tabNutri").onclick = ()=>show("nutri");

  render();
</script>
</body>
</html>
